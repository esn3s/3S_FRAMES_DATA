<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Hex viewer v0.0.1</title>

<link media="all" type="text/css" rel="stylesheet" href="/assets/css/hexViewer.css">
<link media="all" type="text/css" rel="stylesheet" href="/assets/css/multipleselectbox.css">

<script src="/assets/js/jquery-2.1.3.min.js"></script>
<script src="/assets/js/velocity.1.2.2.min.js"></script>
<script src="/assets/js/jquery.multipleselectbox.js"></script>
<script src="/assets/js/hexViewer.js"></script>

</head>
<body>

<header></header>

<div id="hv_main">
	<section class="menubar">menu</section>
	<section>
		<section id="sidebar_left" class="sidebar sidebar_left">
			<section class="sidebar_section">
				<h2>Selected range</h2>
				<div id="sidebar_data" class="sidebar_data">
					<span class="sidebar_span_title">From</span>: <input id="selectedRange_start" value="" readonly /><br />
					<span class="sidebar_span_title">To</span>: <input id="selectedRange_end" value="" readonly /><br />
					<span class="sidebar_span_title">Data</span>: <input id="selectedRange_data" value="" readonly /><br /><br />
					<span class="sidebar_span_title">Watch as</span>:&nbsp;
					<span class="btn_add span_b" title="Unsigned BYTE">B</span>
					<span class="btn_add span_w" title="Unsigned WORD">W</span>
					<span class="btn_add span_ws" title="Signed WORD">WS</span>
					<span class="btn_add span_dw" title="Double WORD">DW</span>
				</div>
			</section>
			<section class="sidebar_section">
				<h2>Data Inspector</h2>
				<div id="sidebar_data_insp" class="sidebar_data_insp">
 					<span class="sidebar_span_title">Type</span><span class="sidebar_span_title">Unsigned</span><span class="sidebar_span_title">Signed</span>
 					<br />
 					<span class="sidebar_span_line">Byte</span>
 					<input id="value_byte_unsigned" class="input_insp span_b" value="" readonly />
 					<br />
					<span class="sidebar_span_line">Word</span>
					<input id="value_word_unsigned" class="input_insp span_w" value="" readonly />
					<input id="value_word_signed" class="input_insp span_ws" value="" readonly />
					<br />
					<span class="sidebar_span_line">DWord</span>
					<input id="value_dword" class="input_insp span_dw" value="" readonly />
					<br />
					<!-- potential HITBOXES -->
					<span class="sidebar_span_line">Hitbox</span>
					<br />
 				</div>
			</section>
		</section>
		<section id="sidebar_right" class="sidebar sidebar_right">Watch list<br /></section>
	</section>
	
	<section id="editor" class="editor"></section>
</div>

<footer></footer>

<script>
// DOM ready...
$(function() {
	var tmpData = [
"00  FEFF00-25700EFFF0-40970000FDD500-5550016004C0012FFCE001A00320014FFB6001A003E0014000000000000000000000000000000000000000000000000FFA80018004800120000000000000000FFC0002800260020FFCE0018001200120000000000000000000000000000000FFD00020002E0020FFDC00140052003400000000000000000000000000000000FFE00012007600140000000000000000FFD40018003800140000000000000000FFE000100076000E0000000000000000FFDA00100036000E0000000000000000FFBE002E00240024FFD000200010001800000000000000000000000000000000FFC0002C00340024000000000000000000000000000000000000000000000000FFC2002A003C0022000000000000000000000000000000000000000000000000FFC4002800600020000000000000000000000000000000000000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFBA00120034000E0000000000000000000FF",
"01  FFC0000E003A000C0000000000000000FFA20016004C0012FFFD001A00320014FFB6001A003E0014000000000000000000000000000000000000000000000000FFA80018004800120000000000000000FFC0002800260020FFCE0018001200120000000000000000000000000000000FFD00020002E0020FFDC00140052003400000000000000000000000000000000FFE00012007600140000000000000000FFD40018003800140000000000000000FFE000100076000E0000000000000000FFDA00100036000E0000000000000000FFBE002E00240024FFD000200010001800000000000000000000000000000000FFC0002C00340024000000000000000000000000000000000000000000000000FFC2002A003C0022000000000000000000000000000000000000000000000000FFC4002800600020000000000000000000000000000000000000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFBA00120034000E0000000000000000000FF",
"02  FFC0000E003A000C0000000000000000FFA20016004C0012FFCE561A00320014FFB6001A003E0014000000000000000000000000000000000000000000000000FFA80018004800120000000000000000FFC0002800260020FFCE0018001200120000000000000000000000000000000FFD00020002E0020FFDC00140052003400000000000000000000000000000000FFE00012007600140000000000000000FFD40018003800140000000000000000FFE000100076000E0000000000000000FFDA00100036000E0000000000000000FFBE002E00240024FFD000200010001800000000000000000000000000000000FFC0002C00340024000000000000000000000000000000000000000000000000FFC2002A003C0022000000000000000000000000000000000000000000000000FFC4002800600020000000000000000000000000000000000000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFBA00120034000E0000000000000000000FF",
"03  FFC0000E003A000C0000000000000000FFA20016004C0012FFCE008900320014FFB6001A003E0014000000000000000000000000000000000000000000000000FFA80018004800120000000000000000FFC0002800260020FFCE0018001200120000000000000000000000000000000FFD00020002E0020FFDC00140052003400000000000000000000000000000000FFE00012007600140000000000000000FFD40018003800140000000000000000FFE000100076000E0000000000000000FFDA00100036000E0000000000000000FFBE002E00240024FFD000200010001800000000000000000000000000000000FFC0002C00340024000000000000000000000000000000000000000000000000FFC2002A003C0022000000000000000000000000000000000000000000000000FFC4002800600020000000000000000000000000000000000000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFBA00120034000E0000000000000000000FF",
"04  FFC0000E003A000C0000000000000000FFA20016004C0012FFCE001A13320014FFB6001A003E0014000000000000000000000000000000000000000000000000FFA80018004800120000000000000000FFC0002800260020FFCE0018001200120000000000000000000000000000000FFD00020002E0020FFDC00140052003400000000000000000000000000000000FFE00012007600140000000000000000FFD40018003800140000000000000000FFE000100076000E0000000000000000FFDA00100036000E0000000000000000FFBE002E00240024FFD000200010001800000000000000000000000000000000FFC0002C00340024000000000000000000000000000000000000000000000000FFC2002A003C0022000000000000000000000000000000000000000000000000FFC4002800600020000000000000000000000000000000000000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFB40016002E00120000000000000000FFCC0016003600120000000000000000FFBA00120034000E00000000000000000FFBA00120034000E0000000000000000000FF",
	               ];
	
	// create object...
	var ehxv = new EHXV({div: "editor"});
	
	var tStart = new Date().getTime();
	ehxv.setData(0x06444C70, tmpData);
	
	// attach event handler for multiselectbox and inspector fields...
	// TODO: move in object instead of declaring it here...
	$("#" + ehxv._cdiv.data.id).multipleSelectBox({
		//onSelectStart: function() { $(this).children().stop().velocity({ opacity: 1 }); },
		onSelectEnd: function() {
			//$(this).children(":not(.selected)").velocity({ opacity: 0.5 }, 100);
			ehxv.updateWithSelectedRange();
		}
	});
	
	// TODO: store in localStorage...
	$(".btn_add", "#sidebar_data").on("click", function() {
		var addr = $("#selectedRange_start").val();
		var size = $("#selectedRange_data").val().length / 2;
		var targetDivs = $("span.selected", ehxv._cdiv.hex);
		
		var w = {
			name: "",
			addr: addr,
			size: size,
			type: this.textContent,
			targetDivs: targetDivs,
		};
		ehxv.addToWatchList(w);
	});
	
	// WATCHER delete event...
	$(".watcher_del").on("click", function() {
		if(confirm("Delete watcher?")) {
			var id = $(this).attr("id").split("_")[1];
			ehxv.removeFromWatchList(id);
		}
	});
	
	ehxv.displayData();
	
	var w = {
		name: "",
		addr: "0x06444C78",
		type: "ws"
	};
	ehxv.addToWatchList(w, ehxv.index);
	
	var k = {
		name: "",
		addr: "0x06444C90",
		type: "b"
	};
	ehxv.addToWatchList(k, ehxv.index);

	var m = {
		name: "",
		addr: "0x06444C90",
		type: "w"
	};
	ehxv.addToWatchList(m, ehxv.index);

	var p = {
		name: "",
		addr: "0x06444C90",
		type: "dw"
	};
	ehxv.addToWatchList(p, ehxv.index);
	
	//ehv.getData(0x06444C70);
	//ehxv.getData(0);
	
	// make hex data clickable...
	//$("span").on("#hex_data", "click", function() { this.toggleClass("selectedData"); });
});

</script>
</body>
</html>
